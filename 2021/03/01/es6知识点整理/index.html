<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>ES6知识整理 | Leah's blog</title><meta name="description" content="ES6知识整理"><meta name="keywords" content="ES6"><meta name="author" content="Leah Zheng"><meta name="copyright" content="Leah Zheng"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="canonical" href="http://yoursite.com/2021/03/01/es6%E7%9F%A5%E8%AF%86%E7%82%B9%E6%95%B4%E7%90%86/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta property="og:type" content="article"><meta property="og:title" content="ES6知识整理"><meta property="og:url" content="http://yoursite.com/2021/03/01/es6%E7%9F%A5%E8%AF%86%E7%82%B9%E6%95%B4%E7%90%86/"><meta property="og:site_name" content="Leah's blog"><meta property="og:description" content="ES6知识整理"><meta property="og:image" content="https://s1.ax1x.com/2020/07/16/UDG9KO.jpg"><meta property="article:published_time" content="2021-03-01T06:45:34.000Z"><meta property="article:modified_time" content="2021-03-01T06:45:34.000Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="prev" title="17-错误信息、try_catch、严格模式" href="http://yoursite.com/2021/03/05/17-%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF%E3%80%81try_catch%E3%80%81%E4%B8%A5%E6%A0%BC%E6%A8%A1%E5%BC%8F/"><link rel="next" title="Vue响应式数据" href="http://yoursite.com/2021/02/24/vue%E5%93%8D%E5%BA%94%E5%BC%8F%E6%95%B0%E6%8D%AE%E5%8E%9F%E7%90%86/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: false,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false    
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true
  }</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><div class="aplayer" data-id="1741189317" data-server="tencent" data-type="playlist" data-fixed="true" data-listFolded="false" data-order="random" data-preload="none"></div><link rel="stylesheet" href="https://cdn.bootcss.com/aplayer/1.10.1/APlayer.min.css"><script src="https://cdn.bootcss.com/aplayer/1.10.1/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/meting@1.2.0/dist/Meting.min.js"></script><link rel="stylesheet" href="../../themes/butterfly/source/css/iconfont.css"><meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="Leah's blog" type="application/atom+xml">
</head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">64</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">51</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">35</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li><li><a class="site-page" href="/books/"><i class="fa-fw fas fa-book"></i><span> Book</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#ES6版本过渡历史"><span class="toc-number">1.</span> <span class="toc-text">ES6版本过渡历史</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#babel将es6转成es5"><span class="toc-number">1.1.</span> <span class="toc-text">babel将es6转成es5</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#执行index-js"><span class="toc-number">1.2.</span> <span class="toc-text">执行index.js</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#块级作用域与嵌套、let、暂行性死区"><span class="toc-number">2.</span> <span class="toc-text">块级作用域与嵌套、let、暂行性死区</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#let块级作用域"><span class="toc-number">2.1.</span> <span class="toc-text">let块级作用域</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#let进阶、const、全部变量与顶层对象"><span class="toc-number">3.</span> <span class="toc-text">let进阶、const、全部变量与顶层对象</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#const定义常量"><span class="toc-number">3.1.</span> <span class="toc-text">const定义常量</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#解构赋值、函数默认值、数组解构、对象解构"><span class="toc-number">4.</span> <span class="toc-text">解构赋值、函数默认值、数组解构、对象解构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#函数默认值"><span class="toc-number">4.1.</span> <span class="toc-text">函数默认值</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#解决办法："><span class="toc-number">4.1.1.</span> <span class="toc-text">解决办法：</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#ES5："><span class="toc-number">4.1.1.1.</span> <span class="toc-text">ES5：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#ES6"><span class="toc-number">4.1.1.2.</span> <span class="toc-text">ES6:</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#解构赋值"><span class="toc-number">4.2.</span> <span class="toc-text">解构赋值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ES6对象的简写"><span class="toc-number">4.3.</span> <span class="toc-text">ES6对象的简写</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#对象属性拼接"><span class="toc-number">4.4.</span> <span class="toc-text">对象属性拼接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#对象的解构"><span class="toc-number">4.5.</span> <span class="toc-text">对象的解构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#数组的解构赋值"><span class="toc-number">4.6.</span> <span class="toc-text">数组的解构赋值</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#隐式转换、函数参数解构、解构本质、-用法"><span class="toc-number">5.</span> <span class="toc-text">隐式转换、函数参数解构、解构本质、()用法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#变量的值的交换"><span class="toc-number">5.1.</span> <span class="toc-text">变量的值的交换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#模式匹配可以匹配同源属性"><span class="toc-number">5.2.</span> <span class="toc-text">模式匹配可以匹配同源属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#函数传参解构赋值"><span class="toc-number">5.3.</span> <span class="toc-text">函数传参解构赋值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#函数传参默认值"><span class="toc-number">5.4.</span> <span class="toc-text">函数传参默认值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#解构赋值隐式转换"><span class="toc-number">5.5.</span> <span class="toc-text">解构赋值隐式转换</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#this指向、箭头函数基本形式、rest运算符"><span class="toc-number">6.</span> <span class="toc-text">this指向、箭头函数基本形式、rest运算符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#this指向"><span class="toc-number">6.1.</span> <span class="toc-text">this指向</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#箭头函数表达式"><span class="toc-number">6.2.</span> <span class="toc-text">箭头函数表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#结合解构赋值"><span class="toc-number">6.2.1.</span> <span class="toc-text">结合解构赋值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sort排序"><span class="toc-number">6.2.2.</span> <span class="toc-text">sort排序</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#rest运算符-展开或收集"><span class="toc-number">6.3.</span> <span class="toc-text">rest运算符(展开或收集)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#箭头函数的实质、箭头函数的使用场景"><span class="toc-number">7.</span> <span class="toc-text">箭头函数的实质、箭头函数的使用场景</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#箭头函数的实质"><span class="toc-number">7.1.</span> <span class="toc-text">箭头函数的实质</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#箭头函数的使用场景"><span class="toc-number">7.2.</span> <span class="toc-text">箭头函数的使用场景</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#函数名-对象拓展、描述符、getter-setter"><span class="toc-number">8.</span> <span class="toc-text">函数名&#x2F;对象拓展、描述符、getter&#x2F;setter</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#获取函数的名称"><span class="toc-number">8.1.</span> <span class="toc-text">获取函数的名称</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#对象属性名可以拼接"><span class="toc-number">8.2.</span> <span class="toc-text">对象属性名可以拼接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#es5属性描述符"><span class="toc-number">8.3.</span> <span class="toc-text">es5属性描述符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#getter-setter"><span class="toc-number">8.4.</span> <span class="toc-text">getter&#x2F;setter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#获取访问器属性的getter和setter方法的属性"><span class="toc-number">8.5.</span> <span class="toc-text">获取访问器属性的getter和setter方法的属性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#对象密封4种方式、assign、取值函数的拷贝"><span class="toc-number">9.</span> <span class="toc-text">对象密封4种方式、assign、取值函数的拷贝</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#对象密封4种方式"><span class="toc-number">9.1.</span> <span class="toc-text">对象密封4种方式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#阻止拓展，不能添加"><span class="toc-number">9.1.0.1.</span> <span class="toc-text">阻止拓展，不能添加</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#设置属性描述符"><span class="toc-number">9.1.0.2.</span> <span class="toc-text">设置属性描述符</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#对象的密封"><span class="toc-number">9.1.0.3.</span> <span class="toc-text">对象的密封</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#对象的冻结"><span class="toc-number">9.1.0.4.</span> <span class="toc-text">对象的冻结</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#assign"><span class="toc-number">9.2.</span> <span class="toc-text">assign</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#可枚举对象的拷贝enumerable-true"><span class="toc-number">9.2.1.</span> <span class="toc-text">可枚举对象的拷贝enumerable:true</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#特殊目标对象"><span class="toc-number">9.2.2.</span> <span class="toc-text">特殊目标对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#特殊被拷贝对象"><span class="toc-number">9.2.3.</span> <span class="toc-text">特殊被拷贝对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#利用assign配置默认参数"><span class="toc-number">9.2.4.</span> <span class="toc-text">利用assign配置默认参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#获取访问器属性的属性描述"><span class="toc-number">9.2.5.</span> <span class="toc-text">获取访问器属性的属性描述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#克隆obj"><span class="toc-number">9.2.6.</span> <span class="toc-text">克隆obj</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#三种对象部署方式"><span class="toc-number">9.3.</span> <span class="toc-text">三种对象部署方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#更改原型"><span class="toc-number">9.4.</span> <span class="toc-text">更改原型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#可枚举属性"><span class="toc-number">9.5.</span> <span class="toc-text">可枚举属性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#super、4种遍历方式、原型、symbol遍历"><span class="toc-number">10.</span> <span class="toc-text">super、4种遍历方式、原型、symbol遍历</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#super"><span class="toc-number">10.1.</span> <span class="toc-text">super</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#symbol原始值"><span class="toc-number">10.2.</span> <span class="toc-text">symbol原始值</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#设置Symbol属性"><span class="toc-number">10.2.1.</span> <span class="toc-text">设置Symbol属性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#for和keyfor"><span class="toc-number">10.2.2.</span> <span class="toc-text">for和keyfor</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#属性循环"><span class="toc-number">10.2.3.</span> <span class="toc-text">属性循环</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#interator迭代器"><span class="toc-number">11.</span> <span class="toc-text">interator迭代器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#map与set"><span class="toc-number">12.</span> <span class="toc-text">map与set</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#set"><span class="toc-number">12.1.</span> <span class="toc-text">set</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#数组去重"><span class="toc-number">12.1.0.1.</span> <span class="toc-text">数组去重</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#数组翻倍"><span class="toc-number">12.1.0.2.</span> <span class="toc-text">数组翻倍</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#过滤偶数"><span class="toc-number">12.1.0.3.</span> <span class="toc-text">过滤偶数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#交集、并集、差集"><span class="toc-number">12.1.0.4.</span> <span class="toc-text">交集、并集、差集</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Map"><span class="toc-number">12.2.</span> <span class="toc-text">Map</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#设置键值"><span class="toc-number">12.2.0.1.</span> <span class="toc-text">设置键值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#获取键值"><span class="toc-number">12.2.0.2.</span> <span class="toc-text">获取键值</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#模式匹配"><span class="toc-number">12.2.0.3.</span> <span class="toc-text">模式匹配</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#map结构转数组"><span class="toc-number">12.2.0.4.</span> <span class="toc-text">map结构转数组</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#map结构转对象"><span class="toc-number">12.2.0.5.</span> <span class="toc-text">map结构转对象</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#对象转成map"><span class="toc-number">12.2.0.6.</span> <span class="toc-text">对象转成map</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#WeakMap与WeakSet、proxy与reflect"><span class="toc-number">13.</span> <span class="toc-text">WeakMap与WeakSet、proxy与reflect</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#WeakMap与WeakSet"><span class="toc-number">13.1.</span> <span class="toc-text">WeakMap与WeakSet</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#proxy代理"><span class="toc-number">13.2.</span> <span class="toc-text">proxy代理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#reflect"><span class="toc-number">13.3.</span> <span class="toc-text">reflect</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#类、类的继承、类的实现、类的修饰"><span class="toc-number">14.</span> <span class="toc-text">类、类的继承、类的实现、类的修饰</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#函数表达式"><span class="toc-number">14.0.0.1.</span> <span class="toc-text">函数表达式</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#class不能函数提升，存在暂时性死区"><span class="toc-number">14.0.0.2.</span> <span class="toc-text">class不能函数提升，存在暂时性死区</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#class没有公有属性"><span class="toc-number">14.0.0.3.</span> <span class="toc-text">class没有公有属性</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#公有方法私有化"><span class="toc-number">14.0.0.4.</span> <span class="toc-text">公有方法私有化</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#getter和setter"><span class="toc-number">14.0.0.5.</span> <span class="toc-text">getter和setter</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#class内部默认严格模式"><span class="toc-number">14.0.0.6.</span> <span class="toc-text">class内部默认严格模式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#类的继承"><span class="toc-number">14.1.</span> <span class="toc-text">类的继承</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#异步的开端-promise"><span class="toc-number">15.</span> <span class="toc-text">异步的开端-promise</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Js的运行原理"><span class="toc-number">15.1.</span> <span class="toc-text">Js的运行原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Promise"><span class="toc-number">15.2.</span> <span class="toc-text">Promise</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#状态固化"><span class="toc-number">15.2.0.1.</span> <span class="toc-text">状态固化</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#状态依赖"><span class="toc-number">15.2.0.2.</span> <span class="toc-text">状态依赖</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Promise原型上的方法"><span class="toc-number">15.2.0.3.</span> <span class="toc-text">Promise原型上的方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#thenable对象转成promise对象"><span class="toc-number">15.2.0.4.</span> <span class="toc-text">thenable对象转成promise对象</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#异步函数promise化-避免回调地狱"><span class="toc-number">15.2.0.5.</span> <span class="toc-text">异步函数promise化(避免回调地狱)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#异步函数promise化封装函数"><span class="toc-number">15.2.0.6.</span> <span class="toc-text">异步函数promise化封装函数</span></a></li></ol></li></ol></li></ol></li></ol></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://s1.ax1x.com/2020/07/16/UDG9KO.jpg)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">Leah's blog</a></span><span class="pull-right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li><li><a class="site-page" href="/books/"><i class="fa-fw fas fa-book"></i><span> Book</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友情链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">ES6知识整理</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2021-03-01 14:45:34"><i class="far fa-calendar-alt fa-fw"></i> 发表于 2021-03-01</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2021-03-01 14:45:34"><i class="fas fa-history fa-fw"></i> 更新于 2021-03-01</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fas fa-inbox fa-fw post-meta__icon"></i><a class="post-meta__categories" href="/categories/ES6/">ES6</a></span></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta__icon"></i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h2 id="ES6版本过渡历史"><a href="#ES6版本过渡历史" class="headerlink" title="ES6版本过渡历史"></a>ES6版本过渡历史</h2><h3 id="babel将es6转成es5"><a href="#babel将es6转成es5" class="headerlink" title="babel将es6转成es5"></a>babel将es6转成es5</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">npm init</span><br><span class="line">npm i babel-preset-env babel-cli --save-dev</span><br><span class="line">新建.babelrc  &#123;<span class="string">"presets"</span>:[<span class="string">"babel-preset-env"</span>]&#125;</span><br><span class="line">package.json-&gt;<span class="string">'script'</span>-&gt;</span><br><span class="line"><span class="string">"build"</span>:<span class="string">"babel index.js -out-file bundle.js(文件)"</span>或</span><br><span class="line">		:<span class="string">"babel src -d lib(文件夹下的文件)"</span></span><br><span class="line">npm run build</span><br></pre></td></tr></table></figure>

<h3 id="执行index-js"><a href="#执行index-js" class="headerlink" title="执行index.js"></a>执行index.js</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">package.json -&gt; scripts -&gt; <span class="string">"script-name"</span>:<span class="string">"babel-node/src/index.js"</span></span><br><span class="line">npm run script-name</span><br><span class="line">cd src </span><br><span class="line">node index.js</span><br></pre></td></tr></table></figure>

<h2 id="块级作用域与嵌套、let、暂行性死区"><a href="#块级作用域与嵌套、let、暂行性死区" class="headerlink" title="块级作用域与嵌套、let、暂行性死区"></a>块级作用域与嵌套、let、暂行性死区</h2><p>KISS(keep it simple and stupid)原则 </p>
<p>解决变量污染：<strong>函数提纯</strong></p>
<h3 id="let块级作用域"><a href="#let块级作用域" class="headerlink" title="let块级作用域"></a>let块级作用域</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>()&#123;&#125;<span class="keyword">else</span>&#123;&#125;</span><br><span class="line"><span class="keyword">for</span>()&#123;&#125;</span><br><span class="line">&#123;&#125;函数内部</span><br></pre></td></tr></table></figure>

<ol>
<li>在同一作用域下不可重复声明</li>
<li>不会变量提升，会产生暂时性死区（Temproal dead zone）</li>
<li>只在当前作用域生效</li>
<li>能够防止变量泄露</li>
</ol>
<p>let本质上是为了给JS增加一个块级作用域</p>
<p>不建议在块级作用域中用函数声明的方式来声明函数，而是用函数表达式声明</p>
<p>块级作用域没有变量接收返回值，所以没有返回值</p>
<h2 id="let进阶、const、全部变量与顶层对象"><a href="#let进阶、const、全部变量与顶层对象" class="headerlink" title="let进阶、const、全部变量与顶层对象"></a>let进阶、const、全部变量与顶层对象</h2><h3 id="const定义常量"><a href="#const定义常量" class="headerlink" title="const定义常量"></a>const定义常量</h3><ol>
<li>一旦定义必须赋值</li>
<li>有块级作用域</li>
<li>不能变量提升，会产生暂时性死区</li>
<li>同一作用域下不可重复声明</li>
</ol>
<p>const obj=[ ] 定义的数据是<strong>引用值</strong>，<strong>栈内存</strong>中保存的是指向堆内存的地址不变，但存储在<strong>堆内存</strong>中的数据可以改动</p>
<p>解决办法：通过Object.<strong>freeze</strong>(obj) 冻结</p>
<h2 id="解构赋值、函数默认值、数组解构、对象解构"><a href="#解构赋值、函数默认值、数组解构、对象解构" class="headerlink" title="解构赋值、函数默认值、数组解构、对象解构"></a>解构赋值、函数默认值、数组解构、对象解构</h2><h3 id="函数默认值"><a href="#函数默认值" class="headerlink" title="函数默认值"></a>函数默认值</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">x,y</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> x = x || <span class="number">1</span>;</span><br><span class="line">&#125; <span class="comment">//当x为0时，会取||后的数</span></span><br></pre></td></tr></table></figure>

<h4 id="解决办法："><a href="#解决办法：" class="headerlink" title="解决办法："></a>解决办法：</h4><h5 id="ES5："><a href="#ES5：" class="headerlink" title="ES5："></a>ES5：</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="keyword">typeof</span>(argument[<span class="number">0</span>]!==<span class="string">'undefined'</span>? argument[<span class="number">0</span>]:<span class="number">1</span>)</span><br></pre></td></tr></table></figure>

<h5 id="ES6"><a href="#ES6" class="headerlink" title="ES6:"></a>ES6:</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">x=<span class="number">1</span>, y=<span class="number">2</span></span>) </span>&#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>相当于在独立作用域中let x=1 let y =2</p>
<h3 id="解构赋值"><a href="#解构赋值" class="headerlink" title="解构赋值"></a>解构赋值</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> [a,b,c] = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br></pre></td></tr></table></figure>

<p><strong>模式匹配</strong>，结构化赋值</p>
<ul>
<li>解构失败：变量个数大于值，没有值的变量为undefined</li>
<li>不完全结构：变量个数小于值</li>
</ul>
<p>解构赋值可传默认值，默认值可以为函数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>)</span>&#123;<span class="built_in">console</span>.log(<span class="number">1</span>)&#125;;</span><br><span class="line"><span class="keyword">let</span> [a = foo()] = [] </span><br><span class="line"><span class="comment">// 输出 1</span></span><br><span class="line"><span class="comment">// 再输出undefined  因为函数返回值为undefined</span></span><br></pre></td></tr></table></figure>



<h3 id="ES6对象的简写"><a href="#ES6对象的简写" class="headerlink" title="ES6对象的简写"></a>ES6对象的简写</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> name = <span class="string">'leah'</span>,</span><br><span class="line">	age = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">	name,</span><br><span class="line">	age，</span><br><span class="line">	eat()&#123;...&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//当属姓名与属性值相同时可简写</span></span><br><span class="line"><span class="comment">//方法也可简写</span></span><br></pre></td></tr></table></figure>

<h3 id="对象属性拼接"><a href="#对象属性拼接" class="headerlink" title="对象属性拼接"></a>对象属性拼接</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fname = <span class="string">'leah'</span>,</span><br><span class="line">	lname = <span class="string">'zheng'</span>,</span><br><span class="line">	age = <span class="number">20</span>;</span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">	[fname + lname]:age</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//&#123;'leah zheng':20&#125;</span></span><br></pre></td></tr></table></figure>

<h3 id="对象的解构"><a href="#对象的解构" class="headerlink" title="对象的解构"></a>对象的解构</h3><p>相同属性名</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123;a,b,c&#125; = &#123;<span class="attr">a</span>:<span class="number">1</span>,<span class="attr">b</span>:<span class="number">2</span>,<span class="attr">c</span>:<span class="number">3</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = &#123;</span><br><span class="line">    son:&#123;</span><br><span class="line">        name:<span class="string">'leah'</span>,</span><br><span class="line">        son:&#123;</span><br><span class="line">            name:<span class="string">'mike'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> &#123;<span class="attr">son</span>:&#123;son&#125;&#125; = person <span class="comment">// son:&#123;name:'mike'&#125; </span></span><br><span class="line"><span class="keyword">var</span> &#123;<span class="attr">son</span>:&#123;<span class="attr">son</span>:son1&#125;&#125; = person <span class="comment">//son1:&#123;name:'mike'&#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a1 = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],obj2 = &#123;&#125;;</span><br><span class="line">[obj2.a,obj2.b,obj.c] = a1</span><br><span class="line"><span class="comment">//给对象的属性声明并赋值，但没有单独声明变量</span></span><br></pre></td></tr></table></figure>

<p>用let，var声明解构赋值加（）会报错</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a;</span><br><span class="line">(&#123;a&#125;=&#123;<span class="attr">a</span>:<span class="number">1</span>&#125;) <span class="comment">//变成表达式</span></span><br><span class="line"><span class="comment">//a = 1 不报错</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//报错</span></span><br><span class="line"><span class="keyword">let</span> (&#123;a&#125;=&#123;<span class="attr">a</span>:<span class="number">1</span>&#125;)</span><br><span class="line"><span class="keyword">let</span> &#123;(a)&#125;=&#123;<span class="attr">a</span>:<span class="number">1</span>&#125;</span><br><span class="line"><span class="keyword">let</span> &#123;a&#125;=&#123;(a:<span class="number">1</span>)&#125;</span><br></pre></td></tr></table></figure>

<p>函数的参数不能加（）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">([a]</span>))</span>&#123;</span><br><span class="line">	...</span><br><span class="line">&#125; <span class="comment">//报错 函数的形参相当于let ([a]),而let不能加[]</span></span><br></pre></td></tr></table></figure>

<h3 id="数组的解构赋值"><a href="#数组的解构赋值" class="headerlink" title="数组的解构赋值"></a>数组的解构赋值</h3><p>数组是特殊的对象，也能进行解构赋值</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]</span><br><span class="line"><span class="keyword">let</span> &#123;<span class="number">0</span>:first,[arr.length<span class="number">-1</span>]:last&#125; = arr;</span><br><span class="line"><span class="comment">//first:1 last:3</span></span><br></pre></td></tr></table></figure>



<h2 id="隐式转换、函数参数解构、解构本质、-用法"><a href="#隐式转换、函数参数解构、解构本质、-用法" class="headerlink" title="隐式转换、函数参数解构、解构本质、()用法"></a>隐式转换、函数参数解构、解构本质、()用法</h2><h3 id="变量的值的交换"><a href="#变量的值的交换" class="headerlink" title="变量的值的交换"></a>变量的值的交换</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">1</span>,b = <span class="number">2</span>;</span><br><span class="line">[a , b] = [b , a];</span><br></pre></td></tr></table></figure>

<h3 id="模式匹配可以匹配同源属性"><a href="#模式匹配可以匹配同源属性" class="headerlink" title="模式匹配可以匹配同源属性"></a>模式匹配可以匹配同源属性</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123;a = x,a = y&#125; = &#123;<span class="attr">a</span> :<span class="number">1</span>&#125;</span><br><span class="line"><span class="built_in">console</span>.log(x,y)<span class="comment">// 1,1</span></span><br></pre></td></tr></table></figure>

<h3 id="函数传参解构赋值"><a href="#函数传参解构赋值" class="headerlink" title="函数传参解构赋值"></a>函数传参解构赋值</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">[x,y]</span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(x,y)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo([]) <span class="comment">//undefined undefined</span></span><br><span class="line">foo(&#123;<span class="attr">x</span>:<span class="number">1</span>,<span class="attr">y</span>:<span class="number">2</span>&#125;) <span class="comment">// 1 2</span></span><br></pre></td></tr></table></figure>

<h3 id="函数传参默认值"><a href="#函数传参默认值" class="headerlink" title="函数传参默认值"></a>函数传参默认值</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">&#123;x=<span class="number">10</span>&#125;=&#123;&#125;,&#123;y&#125;=&#123;y=<span class="number">10</span>&#125;</span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(x,y)</span><br><span class="line">&#125;</span><br><span class="line">foo()  <span class="comment">//10 10</span></span><br><span class="line">foo(&#123;&#125;,&#123;&#125;) <span class="comment">// 10 undefined</span></span><br><span class="line">foo(&#123;<span class="attr">x</span>:<span class="number">2</span>&#125;,&#123;<span class="attr">y</span>:<span class="number">3</span>&#125;) <span class="comment">// 2 3</span></span><br></pre></td></tr></table></figure>

<h3 id="解构赋值隐式转换"><a href="#解构赋值隐式转换" class="headerlink" title="解构赋值隐式转换"></a>解构赋值隐式转换</h3><p>undefined和null不能</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> [a,b,c,d,e,f] = <span class="string">'hello'</span>; =&gt; 类数组</span><br><span class="line"><span class="keyword">const</span> &#123;<span class="attr">length</span>:len&#125; = <span class="string">'hello'</span> =&gt;类数组</span><br><span class="line">	<span class="built_in">console</span>.log(len) <span class="comment">// 5</span></span><br><span class="line"><span class="keyword">let</span> &#123;<span class="attr">toString</span>:s&#125; = <span class="number">123</span>; </span><br><span class="line">	<span class="built_in">console</span>.log(s === <span class="built_in">Number</span>.prototype.toString());</span><br></pre></td></tr></table></figure>

<p>函数的形参一旦给了默认值，形参和实参的映射关系不复存在</p>
<h2 id="this指向、箭头函数基本形式、rest运算符"><a href="#this指向、箭头函数基本形式、rest运算符" class="headerlink" title="this指向、箭头函数基本形式、rest运算符"></a>this指向、箭头函数基本形式、rest运算符</h2><h3 id="this指向"><a href="#this指向" class="headerlink" title="this指向"></a>this指向</h3><ol>
<li>默认绑定规则  window （严格模式下undefined</li>
<li>隐式绑定：谁调用指向谁</li>
<li>显示绑定：call apply bind</li>
<li>new指向实例化对象</li>
</ol>
<h3 id="箭头函数表达式"><a href="#箭头函数表达式" class="headerlink" title="箭头函数表达式"></a>箭头函数表达式</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> f = <span class="function">(<span class="params">a,b</span>) =&gt;</span> a + b <span class="comment">//语句只有一条且return执行结果时可简写</span></span><br></pre></td></tr></table></figure>

<h4 id="结合解构赋值"><a href="#结合解构赋值" class="headerlink" title="结合解构赋值"></a>结合解构赋值</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> full = (&#123;fitst,last&#125;=&#123;&#125;)&#123;</span><br><span class="line">	<span class="keyword">return</span> first + <span class="string">" "</span> + last;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(full(&#123;<span class="attr">first</span>:<span class="number">1</span>,<span class="attr">last</span>:<span class="number">2</span>&#125;))  <span class="comment">// 1 2</span></span><br></pre></td></tr></table></figure>

<h4 id="sort排序"><a href="#sort排序" class="headerlink" title="sort排序"></a>sort排序</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr1 = arr.sort(<span class="function">(<span class="params">a,b</span>)=&gt;</span>a-b);</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> sortNum = <span class="function">(<span class="params">...args</span>) =&gt;</span> args.sort(<span class="function">(<span class="params">a,b</span>)=&gt;</span> a-b)</span><br></pre></td></tr></table></figure>



<p><strong>箭头函数不能使用arguments</strong></p>
<h3 id="rest运算符-展开或收集"><a href="#rest运算符-展开或收集" class="headerlink" title="rest运算符(展开或收集)"></a>rest运算符(展开或收集)</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> sum = <span class="function">(<span class="params">...args</span>) =&gt;</span> &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(args[<span class="number">0</span>],args[<span class="number">1</span>])</span><br><span class="line">&#125;</span><br><span class="line">sun(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>)  <span class="comment">//1,2  //收集</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> fn = <span class="function">(<span class="params">a,b,...c</span>)=&gt;</span>&#123; <span class="comment">//收集 rest必须是最后一个参数</span></span><br><span class="line">    <span class="built_in">console</span>.log(a,b,c)</span><br><span class="line">&#125;</span><br><span class="line">fn(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">x,y,z</span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(x,y,z);</span><br><span class="line">&#125;</span><br><span class="line">foo(...[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]) <span class="comment">// 1，2，3 //展开</span></span><br></pre></td></tr></table></figure>

<h2 id="箭头函数的实质、箭头函数的使用场景"><a href="#箭头函数的实质、箭头函数的使用场景" class="headerlink" title="箭头函数的实质、箭头函数的使用场景"></a>箭头函数的实质、箭头函数的使用场景</h2><h3 id="箭头函数的实质"><a href="#箭头函数的实质" class="headerlink" title="箭头函数的实质"></a>箭头函数的实质</h3><ol>
<li>this指向由外层函数作用域决定</li>
<li>箭头函数不能作为构造函数来使用，不能使用call，apply，bind</li>
<li>没有argument对象，用rest拓展运算符代替</li>
<li>在generator函数中，yield命令不生效</li>
</ol>
<p>this的指向是固化的，箭头函数内部并没有自己的this，只能通过父级作用域获取this(闭包产生的this)</p>
<p>因为箭头函数本质上是不通过function定义的，而是通过=&gt;旁箭头定义的</p>
<p><strong>闭包</strong>：一个函数的执行导致另一个函数的定义</p>
<h3 id="箭头函数的使用场景"><a href="#箭头函数的使用场景" class="headerlink" title="箭头函数的使用场景"></a>箭头函数的使用场景</h3><ol>
<li><p>简单的函数表达式，得出唯一的return的计算值</p>
</li>
<li><p>函数内部没有this的引用，没有递归，事件绑定</p>
</li>
<li><p>内层函数表达式，需要调用this，如bind(this)确保this指向的时候</p>
</li>
<li><p>引用Array.prototype上的方法时，用…代替</p>
<p>const sortNum = (…args) =&gt;args.sort((a,b)=&gt;a-b)</p>
</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> insert = <span class="function">(<span class="params">value</span>) =&gt;</span> (&#123;</span><br><span class="line">	intro:<span class="function"><span class="params">array</span> =&gt;</span> (&#123;</span><br><span class="line">		after:<span class="function"><span class="params">afterVal</span>=&gt;</span>&#123;</span><br><span class="line">			array.splice(array.indexOf(afterVal)+<span class="number">1</span>,<span class="number">0</span>,value)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//箭头函数返回值为对象时要加()</span></span><br><span class="line">inset(<span class="number">5</span>).intro([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">7</span>]).after(<span class="number">4</span>)</span><br></pre></td></tr></table></figure>

<h2 id="函数名-对象拓展、描述符、getter-setter"><a href="#函数名-对象拓展、描述符、getter-setter" class="headerlink" title="函数名/对象拓展、描述符、getter/setter"></a>函数名/对象拓展、描述符、getter/setter</h2><h3 id="获取函数的名称"><a href="#获取函数的名称" class="headerlink" title="获取函数的名称"></a>获取函数的名称</h3><p>function.name  / (new Function).name</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">foo.bind(&#123;&#125;).name  <span class="comment">// bound foo</span></span><br><span class="line">foo.call(&#123;&#125;) <span class="comment">// 报错</span></span><br></pre></td></tr></table></figure>

<h3 id="对象属性名可以拼接"><a href="#对象属性名可以拼接" class="headerlink" title="对象属性名可以拼接"></a>对象属性名可以拼接</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="string">'hh'</span>,b = <span class="string">'xx'</span>;</span><br><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">	[a + b]:<span class="number">123</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//对象的属性名为字符串</span></span><br></pre></td></tr></table></figure>

<p>当对象的属性名为对象时，会调用Object.prototype.toString方法，属性名就会变成[object Object]</p>
<h3 id="es5属性描述符"><a href="#es5属性描述符" class="headerlink" title="es5属性描述符"></a>es5属性描述符</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.getOwnPropertyDescriptor(obj,<span class="string">'name'</span>) <span class="comment">//获取对象属性</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj,<span class="string">'a'</span>,&#123;</span><br><span class="line">    value:<span class="number">1</span>,</span><br><span class="line">    configurable:<span class="literal">true</span>, <span class="comment">//可配置的</span></span><br><span class="line">    enumberable:<span class="literal">true</span>, <span class="comment">//可枚举的</span></span><br><span class="line">    writable:<span class="literal">true</span>  <span class="comment">//可写</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>注：当writable：false时，<strong>delete</strong> obj.a 还是能删除，同时设置configurable：false才能阻止被删除</p>
<p>定义多个属性defineProperties</p>
<p>查看多个属性描述 getOwnPropertyDescriptors</p>
<h3 id="getter-setter"><a href="#getter-setter" class="headerlink" title="getter/setter"></a>getter/setter</h3><p>访问器属性：一组设置和获取值的函数，</p>
<p>getter负责获取值，不带任何参数，</p>
<p>setter负责设置值，在它的函数体中一切的return都是无效的</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">	a:<span class="number">3</span>,</span><br><span class="line">	<span class="keyword">get</span> val()&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">this</span>.a</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="keyword">set</span> val(n)&#123;</span><br><span class="line">		<span class="keyword">this</span>.a = n</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(obj.val)  <span class="comment">// 3</span></span><br><span class="line">obj.val = <span class="number">100</span>;</span><br><span class="line"><span class="built_in">console</span>.log(obj.val)  <span class="comment">// 100</span></span><br></pre></td></tr></table></figure>

<p>在对象内设置了存取器属性，如果某一变量只声明了<strong>getter</strong>方法，那么它仅仅只<strong>可读不可写</strong>，如果只声明了<strong>setter</strong>方法，那么该变量永远为<strong>undefined</strong></p>
<h3 id="获取访问器属性的getter和setter方法的属性"><a href="#获取访问器属性的getter和setter方法的属性" class="headerlink" title="获取访问器属性的getter和setter方法的属性"></a>获取访问器属性的getter和setter方法的属性</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> discriptor = <span class="built_in">Object</span>.getOwnPrppertyDescriptor(obj,<span class="string">'val'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(discriptor.get.name)</span><br></pre></td></tr></table></figure>

<h2 id="对象密封4种方式、assign、取值函数的拷贝"><a href="#对象密封4种方式、assign、取值函数的拷贝" class="headerlink" title="对象密封4种方式、assign、取值函数的拷贝"></a>对象密封4种方式、assign、取值函数的拷贝</h2><h3 id="对象密封4种方式"><a href="#对象密封4种方式" class="headerlink" title="对象密封4种方式"></a>对象密封4种方式</h3><h5 id="阻止拓展，不能添加"><a href="#阻止拓展，不能添加" class="headerlink" title="阻止拓展，不能添加"></a>阻止拓展，不能添加</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">a</span>:<span class="number">2</span>&#125;</span><br><span class="line"><span class="built_in">Object</span>.preventExtensions(obj);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.isExtensible(obj)) <span class="comment">//false</span></span><br><span class="line"><span class="comment">//这两个方法都在Object原型上</span></span><br></pre></td></tr></table></figure>

<h5 id="设置属性描述符"><a href="#设置属性描述符" class="headerlink" title="设置属性描述符"></a>设置属性描述符</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">obj.b = <span class="number">2</span> <span class="comment">//该情况下，属性描述符全是true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.defineProperty(obj,<span class="string">'a'</span>,&#123;</span><br><span class="line">	value:<span class="number">2</span></span><br><span class="line">&#125;) <span class="comment">//该情况下，属性描述符全是false</span></span><br></pre></td></tr></table></figure>

<h5 id="对象的密封"><a href="#对象的密封" class="headerlink" title="对象的密封"></a>对象的密封</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//configurable：false不能配置</span></span><br><span class="line"><span class="built_in">Object</span>.seal(obj)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.isSealed(obj)) <span class="comment">//查看密封情况</span></span><br></pre></td></tr></table></figure>

<h5 id="对象的冻结"><a href="#对象的冻结" class="headerlink" title="对象的冻结"></a>对象的冻结</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.freeze(obj)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.isFreeze(obj)) <span class="comment">//查看冻结状况</span></span><br></pre></td></tr></table></figure>

<p>深度冻结</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepFreeze</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">	<span class="built_in">Object</span>.freeze(obj);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> obj)&#123;</span><br><span class="line">		<span class="keyword">if</span>((typeOf (obj[key])===<span class="string">'object'</span>)&amp;&amp;obj[key]!==<span class="literal">null</span>)&#123;</span><br><span class="line">			deepFreeze(obj[key])</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="assign"><a href="#assign" class="headerlink" title="assign"></a>assign</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.is(<span class="literal">NaN</span>,<span class="literal">NaN</span>)  <span class="comment">//true</span></span><br><span class="line"><span class="built_in">Object</span>.is(<span class="number">-0</span>,+<span class="number">0</span>)  <span class="comment">//false</span></span><br></pre></td></tr></table></figure>

<h4 id="可枚举对象的拷贝enumerable-true"><a href="#可枚举对象的拷贝enumerable-true" class="headerlink" title="可枚举对象的拷贝enumerable:true"></a>可枚举对象的拷贝enumerable:true</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.assign(tar(目标对象),obj，...(被拷贝对象，可添加多个，重复值会覆盖))  <span class="comment">//浅拷贝</span></span><br></pre></td></tr></table></figure>

<h4 id="特殊目标对象"><a href="#特殊目标对象" class="headerlink" title="特殊目标对象"></a>特殊目标对象</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> test = <span class="built_in">Object</span>.assign(<span class="number">1</span>,&#123;<span class="attr">a</span>:<span class="number">1</span>&#125;) </span><br><span class="line"><span class="comment">//包装类 Number(1,&#123;a:1&#125;)</span></span><br><span class="line"><span class="comment">//注：undefined，null不能包装类，作为目标对象时会报错</span></span><br></pre></td></tr></table></figure>

<h4 id="特殊被拷贝对象"><a href="#特殊被拷贝对象" class="headerlink" title="特殊被拷贝对象"></a>特殊被拷贝对象</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> test1 = <span class="string">'abc'</span>,test2 = <span class="number">10</span>,test3 = <span class="literal">false</span>;</span><br><span class="line"><span class="built_in">Object</span>.assign(&#123;&#125;,test1,test2,test3) </span><br><span class="line"><span class="comment">// &#123;0:'a',1:'b',2:'c'&#125;</span></span><br><span class="line"><span class="comment">//字符串转成类数组能够枚举，而数字和布尔值不行</span></span><br></pre></td></tr></table></figure>

<p>assign的特性：</p>
<ul>
<li><p>assign不能拷贝继承属性和不可枚举属性</p>
</li>
<li><p>Symbol类型的值也能拷贝</p>
</li>
<li><p>同名属性替换是将全部属性值替换</p>
</li>
<li><p>数组的替换</p>
<p>Object.assign([1,2,3],[4,5])   // [4,5,3]</p>
</li>
</ul>
<h4 id="利用assign配置默认参数"><a href="#利用assign配置默认参数" class="headerlink" title="利用assign配置默认参数"></a>利用assign配置默认参数</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> Default=&#123;<span class="attr">host</span>:<span class="string">'www.baidu.com'</span>&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">option</span>)</span>&#123;</span><br><span class="line">	option = <span class="built_in">Object</span>.assign(&#123;&#125;,<span class="keyword">default</span>,option)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//若有传入参数option，那么会覆盖Default默认值</span></span><br></pre></td></tr></table></figure>

<h4 id="获取访问器属性的属性描述"><a href="#获取访问器属性的属性描述" class="headerlink" title="获取访问器属性的属性描述"></a>获取访问器属性的属性描述</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Object.assign 无法拷贝</span></span><br><span class="line"><span class="keyword">const</span> sourse = &#123;</span><br><span class="line">	<span class="keyword">set</span> foo(value)&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(value)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> tar = &#123;&#125;;</span><br><span class="line"><span class="built_in">Object</span>.defineProperties(tar,<span class="built_in">Object</span>.getOwnPropertyDescriptors(sourse));</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getOwnPropertyDescriptors(tar,<span class="string">'foo'</span>));</span><br></pre></td></tr></table></figure>

<h4 id="克隆obj"><a href="#克隆obj" class="headerlink" title="克隆obj"></a>克隆obj</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">	a:<span class="number">1</span>,</span><br><span class="line">	b:<span class="number">2</span>,</span><br><span class="line">	c:<span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> clone = <span class="function"><span class="params">obj</span> =&gt;</span>&#123;</span><br><span class="line">	<span class="built_in">Object</span>.getPrototypeOf(obj),</span><br><span class="line">	<span class="built_in">Object</span>.getOwnPropertyDescriptors(obj)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj2 = clone(obj)</span><br></pre></td></tr></table></figure>

<h3 id="三种对象部署方式"><a href="#三种对象部署方式" class="headerlink" title="三种对象部署方式"></a>三种对象部署方式</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = <span class="built_in">Object</span>.create(prototype);</span><br><span class="line">obj.foo = <span class="number">123</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = <span class="built_in">Object</span>.assign(<span class="built_in">Object</span>.create(prototype),&#123;<span class="attr">foo</span>:<span class="number">123</span>&#125;);</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = <span class="built_in">Object</span>.create(prototype,<span class="built_in">Object</span>.getOwnPropertyDescriptors(&#123;<span class="attr">foo</span>:<span class="number">123</span>&#125;))</span><br></pre></td></tr></table></figure>



<h3 id="更改原型"><a href="#更改原型" class="headerlink" title="更改原型"></a>更改原型</h3><p>person.__ proto __ = {…} </p>
<p>缺点：1.语义化，内部属性 2.访问效率慢  3.所有继承自该属性的对象都会影响到</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.getPrototypeOf(读取)</span><br><span class="line"><span class="built_in">Object</span>.create(原型,&#123;对象属性&#125;) <span class="comment">//生成</span></span><br><span class="line"><span class="built_in">Object</span>.setPrototypeOf(obj,prototype) <span class="comment">//直接修改obj的原型</span></span><br></pre></td></tr></table></figure>

<h3 id="可枚举属性"><a href="#可枚举属性" class="headerlink" title="可枚举属性"></a>可枚举属性</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.keys(obj) <span class="comment">//自身可枚举的键名(不含继承属性)</span></span><br><span class="line"><span class="built_in">Object</span>.values(obj) <span class="comment">//自身可枚举的键值(不含继承属性)</span></span><br><span class="line"><span class="built_in">Object</span>.entires(obj) <span class="comment">//自生可枚举的键值对(不含继承属性)</span></span><br><span class="line"><span class="comment">//返回的都是数组</span></span><br><span class="line"><span class="comment">//obj为字符串时转包装类</span></span><br></pre></td></tr></table></figure>



<h2 id="super、4种遍历方式、原型、symbol遍历"><a href="#super、4种遍历方式、原型、symbol遍历" class="headerlink" title="super、4种遍历方式、原型、symbol遍历"></a>super、4种遍历方式、原型、symbol遍历</h2><h3 id="super"><a href="#super" class="headerlink" title="super"></a>super</h3><p>指向对象的原型，相当于this</p>
<p>只在对象的简写方法中生效 foo(){…}</p>
<h3 id="symbol原始值"><a href="#symbol原始值" class="headerlink" title="symbol原始值"></a>symbol原始值</h3><p>创建一个独一无二的值(并不是字符串)</p>
<p>解决对象属性重名的问题</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Symbol</span>(obj) <span class="comment">// Symbol([object Object]) 调用toString</span></span><br><span class="line"><span class="built_in">Symbol</span>(<span class="literal">undefined</span>) <span class="comment">//Symbol()</span></span><br><span class="line"><span class="built_in">Symbol</span>(<span class="literal">null</span>) <span class="comment">// Symbol(null)</span></span><br></pre></td></tr></table></figure>

<p>Symbol不能通过Number转，</p>
<p>显示转换可以通过String、Boolean，</p>
<p>隐式转换限于boolean         ！Symbol // false</p>
<p>Symbol不是构造函数</p>
<p>Symbol原型上的方法： toString()   for()   keyfor()</p>
<h4 id="设置Symbol属性"><a href="#设置Symbol属性" class="headerlink" title="设置Symbol属性"></a>设置Symbol属性</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> name = <span class="built_in">Symbol</span>(), eat = <span class="built_in">Symbol</span>();</span><br><span class="line"><span class="keyword">const</span> person = &#123;&#125;;</span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">	[name]:<span class="string">'leah'</span>,</span><br><span class="line">	[eat]()&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="keyword">this</span>[name])</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">person[eat]() <span class="comment">// leah</span></span><br></pre></td></tr></table></figure>

<h4 id="for和keyfor"><a href="#for和keyfor" class="headerlink" title="for和keyfor"></a>for和keyfor</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Symbol</span>.for(<span class="string">'foo'</span>) === <span class="built_in">Symbol</span>.for(<span class="string">'foo'</span>)  <span class="comment">//true </span></span><br><span class="line"><span class="built_in">Symbol</span>(<span class="string">'foo'</span>) === <span class="built_in">Symbol</span>.for(<span class="string">'for'</span>) <span class="comment">//false</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Symbol</span>.keyfor(<span class="string">'foo'</span>)  <span class="comment">// 'foo'</span></span><br><span class="line"><span class="comment">//获取唯一标识符</span></span><br></pre></td></tr></table></figure>

<p>注：</p>
<ol>
<li>Symbol作为对象属性名时，不能用点运算符(点运算符后总是字符串)</li>
<li>在对象内部时使用Symbol定义属性时，Symbol值必须放在<strong>方括号</strong>之中，方括号中的属性名代表了Symbol值</li>
<li>Symbol值作为属性名时，该属性还是公开属性</li>
</ol>
<h4 id="属性循环"><a href="#属性循环" class="headerlink" title="属性循环"></a>属性循环</h4><ul>
<li>for…in遍历自身和继承的可枚举属性(不包含Symbol类型)</li>
<li>Object.keys 遍历自身可枚举属性，不包含Symbol类型</li>
<li>Object.getOwnPropertySymbols 遍历自身的Symbol类型值，不论是否可枚举</li>
<li>Object.assign({},obj) 遍历并拷贝自身可枚举的，包含Symbol类型</li>
</ul>
<h2 id="interator迭代器"><a href="#interator迭代器" class="headerlink" title="interator迭代器"></a>interator迭代器</h2><p>对数据结构读取的一种方式，有序的连续的，基于拉取的一种消耗数据的组织方式</p>
<p>已部署iterator的数据类型：array、number、Map、Set、weakMap、weakSet、argument、nodeList、TypeArray</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>];</span><br><span class="line"><span class="keyword">let</span> iter = arr[<span class="built_in">Symbol</span>.interator]();</span><br><span class="line">iter.next()<span class="comment">// &#123;value:1,done:false&#125;</span></span><br><span class="line">iter.next()<span class="comment">// &#123;value:2,done:false&#125;</span></span><br><span class="line">iter.next()<span class="comment">// &#123;value:3,done:false&#125;</span></span><br><span class="line">iter.next()<span class="comment">// &#123;value:4,done:false&#125;</span></span><br><span class="line">iter.next()<span class="comment">// &#123;value:undefined,done:true&#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">makeInterator</span>(<span class="params">arr</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">var</span> nextIndex = <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		next:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">			<span class="keyword">return</span> nextIndex &gt;arr.length ?</span><br><span class="line">				   &#123;<span class="attr">value</span>:arr[nextIndex++],<span class="attr">done</span>:<span class="literal">false</span>&#125;:</span><br><span class="line">				   &#123;<span class="attr">value</span>:<span class="literal">undefined</span>,<span class="attr">done</span>:<span class="literal">true</span>&#125;;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>给没有interator的数据类型，如对象，自行添加iterator</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">	start:[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>],</span><br><span class="line">	end:[<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>],</span><br><span class="line">	[<span class="built_in">Symbol</span>.interator]()&#123;</span><br><span class="line">		<span class="keyword">let</span> index = <span class="number">0</span> ,</span><br><span class="line">			arr = [...this.start,...this.end],</span><br><span class="line">			len = arr.length;</span><br><span class="line">		<span class="keyword">return</span> &#123;</span><br><span class="line">			next()&#123;</span><br><span class="line">				<span class="keyword">if</span>(index &lt; len)&#123;</span><br><span class="line">					<span class="keyword">return</span> &#123;<span class="attr">value</span>:arr[index++],<span class="attr">done</span>:<span class="literal">false</span>&#125;;</span><br><span class="line">				&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">					<span class="keyword">return</span> &#123;<span class="attr">value</span>:<span class="literal">undefined</span>,<span class="attr">done</span>:<span class="literal">true</span>&#125;;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>foo instanceof Foo  //  判断Foo是否为foo的构造函数</p>
<p>Foo[Symbol.hasInstance] (foo)  // 判断Foo是否为foo的构造函数</p>
<p>for…of适用于遍历数组、map、set等拥有迭代器对象的集合，但不能遍历对象，因为对象没有迭代器</p>
<p>for…in 适用于遍历对象的键名</p>
<p>给对象部署iterator</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> obj = &#123;</span><br><span class="line">	a:<span class="number">1</span>,</span><br><span class="line">	b:<span class="number">2</span>,</span><br><span class="line">	c:<span class="number">3</span>,</span><br><span class="line">	[<span class="built_in">Symbol</span>.iterator]:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="keyword">let</span> nextIndex = <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">		<span class="keyword">for</span>(<span class="keyword">let</span> [key.value] <span class="keyword">of</span> <span class="built_in">Object</span>.entries(<span class="keyword">this</span>))&#123;</span><br><span class="line">			map.set(key,value);</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">let</span> mapEntries = [...map.entries()];</span><br><span class="line">		<span class="keyword">return</span> &#123;</span><br><span class="line">			next()&#123;</span><br><span class="line">				<span class="keyword">return</span> nextIndex &lt; mapEntries.length?</span><br><span class="line">						&#123;<span class="attr">value</span>:mapEntries[nextIndex++],<span class="attr">done</span>:<span class="literal">false</span>&#125;:</span><br><span class="line">						&#123;<span class="attr">value</span>:<span class="literal">undefined</span>,<span class="attr">done</span>:<span class="literal">true</span>&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> i <span class="keyword">of</span> obj) &#123;</span><br><span class="line">	<span class="built_in">console</span>.log(i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//['a',1]</span></span><br><span class="line"><span class="comment">//['b',2]</span></span><br><span class="line"><span class="comment">//['c',3]</span></span><br></pre></td></tr></table></figure>

<h2 id="map与set"><a href="#map与set" class="headerlink" title="map与set"></a>map与set</h2><h3 id="set"><a href="#set" class="headerlink" title="set"></a>set</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="keyword">set</span> = new Set(参数)  //成员是唯一的"数组"</span><br><span class="line">//参数是具备iterator接口的数据结构，如数组、类数组</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span>.add() 添加值，返回<span class="keyword">set</span>结构本身</span><br><span class="line"><span class="keyword">set</span>.size  数据结构的长度，像防御length</span><br><span class="line"><span class="keyword">set</span>.delete() 删除值，返回是否删除的布尔值</span><br><span class="line"><span class="keyword">set</span>.clear() 清空值，返回undefined</span><br><span class="line"><span class="keyword">set</span>.has()  判断是否存在值，返回布尔值</span><br><span class="line">注：delete与clear实时生效，与代码上下位置无关</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span>.keys() 返回迭代器对象，不存在键名</span><br><span class="line"><span class="keyword">set</span>.value() 返回迭代器对象，键名与键值相同</span><br><span class="line"><span class="keyword">set</span>.enrties() 返回键值对迭代器对象</span><br><span class="line">Set.prototype[Symbol.iterator] === Set.prototype.values</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> value <span class="keyword">of</span> <span class="keyword">set</span>)&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(value)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//遍历set的值与遍历set.values的值相同</span></span><br></pre></td></tr></table></figure>

<h5 id="数组去重"><a href="#数组去重" class="headerlink" title="数组去重"></a>数组去重</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">set</span> = new Set([1,2,3,2,4,2,3]);</span><br><span class="line">res = [...<span class="keyword">set</span>] // [1,2,3,4]</span><br><span class="line">//...展开运算符展开具备iterator接口的数据结构</span><br></pre></td></tr></table></figure>

<h5 id="数组翻倍"><a href="#数组翻倍" class="headerlink" title="数组翻倍"></a>数组翻倍</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">set</span> = new Set([1,2,3])</span><br><span class="line">let set1 = new Set([...<span class="keyword">set</span>].map(val =&gt;&#123;val * <span class="number">2</span>&#125;))</span><br><span class="line"><span class="keyword">let</span> set2 = <span class="keyword">new</span> <span class="built_in">Set</span>(<span class="built_in">Array</span>.from(<span class="keyword">set</span>,value =&gt; value * 2))</span><br></pre></td></tr></table></figure>

<h5 id="过滤偶数"><a href="#过滤偶数" class="headerlink" title="过滤偶数"></a>过滤偶数</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> set2 = <span class="keyword">new</span> <span class="built_in">Set</span>([...set].filter(<span class="function"><span class="params">x</span> =&gt;</span> (x % <span class="number">2</span>)==<span class="number">0</span>))</span><br></pre></td></tr></table></figure>

<h5 id="交集、并集、差集"><a href="#交集、并集、差集" class="headerlink" title="交集、并集、差集"></a>交集、并集、差集</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>]),b = <span class="keyword">new</span> <span class="built_in">Set</span>([<span class="number">4</span>,<span class="number">3</span>,<span class="number">2</span>]);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> union = <span class="keyword">new</span> <span class="built_in">Set</span>([...a,...b])  <span class="comment">//交集</span></span><br><span class="line"><span class="keyword">let</span> intersect = <span class="keyword">new</span> <span class="built_in">Set</span>(...a.filter(<span class="function"><span class="params">x</span> =&gt;</span> b.has(x))) <span class="comment">//并集</span></span><br><span class="line"><span class="keyword">let</span> difference = <span class="keyword">new</span> <span class="built_in">Set</span>(...a.filter(<span class="function"><span class="params">x</span> =&gt;</span> !b.has(x))) <span class="comment">//差集</span></span><br></pre></td></tr></table></figure>

<p>当对象的键名为对象时，会隐式调用Object.toString(),将键名转成[object,Object],就不能实现建与值一一对应</p>
<h3 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h3><p>键与值一一对应的“对象”</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> m = <span class="keyword">new</span> <span class="built_in">Map</span>([[<span class="string">"name"</span>,<span class="string">"leah"</span>],[<span class="string">"age"</span>,<span class="number">20</span>]]) <span class="comment">//参数为双元的数组形式，具备iterator接口的数据结构</span></span><br></pre></td></tr></table></figure>

<h5 id="设置键值"><a href="#设置键值" class="headerlink" title="设置键值"></a>设置键值</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">m.set(<span class="string">'name'</span>,<span class="string">'leah'</span>)</span><br></pre></td></tr></table></figure>

<p>键名相同时会覆盖</p>
<h5 id="获取键值"><a href="#获取键值" class="headerlink" title="获取键值"></a>获取键值</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">m.get(键名)</span><br><span class="line"><span class="comment">//键名为引用值时要注意，使用指针做键名(var arr= [1,2,3])</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">map.set(<span class="number">-0</span>,<span class="number">123</span>);</span><br><span class="line">map.get(+<span class="number">0</span>,<span class="number">123</span>) <span class="comment">//123</span></span><br><span class="line"></span><br><span class="line"><span class="literal">NaN</span> ===<span class="literal">NaN</span> <span class="comment">//false</span></span><br><span class="line"><span class="built_in">Object</span>.is(<span class="literal">NaN</span>,<span class="literal">NaN</span>)<span class="comment">// true</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">m.size  <span class="comment">//键值对的个数</span></span><br><span class="line">m.delete(键名) <span class="comment">//返回是否删除的布尔值</span></span><br><span class="line">m.clear() <span class="comment">//返回undefined</span></span><br><span class="line">m.has(键名) <span class="comment">//返回是否存在键值对的布尔值</span></span><br><span class="line">m.set(键名，键值) <span class="comment">//返回map实例，可以链式调用</span></span><br><span class="line">注：<span class="keyword">delete</span>与clear实时生效，与<span class="keyword">set</span>相同</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">m.keys() <span class="comment">//返回键名的迭代器对象</span></span><br><span class="line">m.values() <span class="comment">//返回键值的迭代器对象</span></span><br><span class="line">m.entries()<span class="comment">//返回键值对的迭代器对象</span></span><br><span class="line">m[<span class="built_in">Symbol</span>.iterator] === m.entries</span><br></pre></td></tr></table></figure>

<h5 id="模式匹配"><a href="#模式匹配" class="headerlink" title="模式匹配"></a>模式匹配</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(<span class="keyword">let</span> [key,value] <span class="keyword">in</span> m)&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(key,value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="map结构转数组"><a href="#map结构转数组" class="headerlink" title="map结构转数组"></a>map结构转数组</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [...m]</span><br></pre></td></tr></table></figure>

<h5 id="map结构转对象"><a href="#map结构转对象" class="headerlink" title="map结构转对象"></a>map结构转对象</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//条件：键名为字符串</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">strMapToObj</span>(<span class="params">strMap</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">let</span> obj = <span class="built_in">Object</span>.create(<span class="literal">null</span>);</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">let</span> [key,value] <span class="keyword">of</span> strMap)&#123;</span><br><span class="line">		obj[key] = value</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> obj;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="对象转成map"><a href="#对象转成map" class="headerlink" title="对象转成map"></a>对象转成map</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">objTostrMap</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">	<span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">in</span> obj)&#123;</span><br><span class="line">		map.set(key,obj[key])</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> map;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="WeakMap与WeakSet、proxy与reflect"><a href="#WeakMap与WeakSet、proxy与reflect" class="headerlink" title="WeakMap与WeakSet、proxy与reflect"></a>WeakMap与WeakSet、proxy与reflect</h2><h3 id="WeakMap与WeakSet"><a href="#WeakMap与WeakSet" class="headerlink" title="WeakMap与WeakSet"></a>WeakMap与WeakSet</h3><ol>
<li>不存在遍历方法</li>
<li>成员只能是对象，weakMap的键名要为对象</li>
<li>不计入垃圾回收机制引用次数，若引用次数不为0，垃圾回收机制就不会释放内存（弱引用）</li>
</ol>
<h3 id="proxy代理"><a href="#proxy代理" class="headerlink" title="proxy代理"></a>proxy代理</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> star = &#123;</span><br><span class="line">	name:<span class="string">'leah'</span>,</span><br><span class="line">	age:<span class="number">20</span>,</span><br><span class="line">	phone:<span class="number">1223423</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> agent = <span class="keyword">new</span> <span class="built_in">Proxy</span>(star,&#123;</span><br><span class="line">	<span class="keyword">get</span>:function(target,key)&#123;</span><br><span class="line">		<span class="keyword">if</span>(key===<span class="string">'phone'</span>)&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="string">'agents phone 12223333'</span></span><br><span class="line">		&#125;;</span><br><span class="line">		<span class="keyword">if</span>(key===<span class="string">'price'</span>)&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="number">10000</span></span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">return</span> target[key];</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="keyword">set</span>:function(target,key,value)&#123;</span><br><span class="line">		<span class="keyword">if</span>(value &lt; <span class="number">5000</span>)&#123;</span><br><span class="line">			<span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'价格太低'</span>);</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			target[key] = value;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	has:<span class="function"><span class="keyword">function</span>(<span class="params">target,key</span>)</span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(key === <span class="string">'customousPrice'</span>)&#123;</span><br><span class="line">			<span class="keyword">return</span> target[key]</span><br><span class="line">		&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">			<span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(agent.phone) <span class="comment">//agents phone 12223333</span></span><br><span class="line"><span class="built_in">console</span>.log(agent.price) <span class="comment">//10000</span></span><br><span class="line">agent.customousPrice = <span class="number">15000</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'customousPrice'</span> <span class="keyword">in</span> agent) <span class="comment">//true</span></span><br></pre></td></tr></table></figure>

<h3 id="reflect"><a href="#reflect" class="headerlink" title="reflect"></a>reflect</h3><p>Reflect上定义了一系列操作函数，映射了Proxy对象上的一系列操作方法</p>
<p>在目标对象与源对象中间设置了代理层，目标对象无法直接访问源对象，因此设置具有拦截功能的代理，对拦截的功能进行处理</p>
<h2 id="类、类的继承、类的实现、类的修饰"><a href="#类、类的继承、类的实现、类的修饰" class="headerlink" title="类、类的继承、类的实现、类的修饰"></a>类、类的继承、类的实现、类的修饰</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.getPrototypeOf(person) <span class="comment">//获取实例化对象的原型</span></span><br><span class="line"><span class="built_in">Object</span>.getPrototypeOf(person).constructor = Person</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(name='leah',age=20)&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">        <span class="comment">//私有属性  实例化的属性配置</span></span><br><span class="line">    &#125;</span><br><span class="line">	say()&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">`my name is <span class="subst">$&#123;<span class="keyword">this</span>.name&#125;</span>`</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//公有属性  原型上的方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Object.keys(Person.prototype)普通构造函数的原型可枚举，而class构造函数原型上的方法(公有属性的方法)不可枚举，返回[]</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span></span>&#123; &#125;</span><br><span class="line"><span class="keyword">new</span> Person() </span><br><span class="line"><span class="comment">//会默认添加上constructor</span></span><br></pre></td></tr></table></figure>

<h5 id="函数表达式"><a href="#函数表达式" class="headerlink" title="函数表达式"></a>函数表达式</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> person = <span class="keyword">new</span> <span class="class"><span class="keyword">class</span></span>&#123;</span><br><span class="line">	<span class="keyword">constructor</span>(name)&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name;</span><br><span class="line">	&#125;</span><br><span class="line">	say()&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="keyword">this</span>.name);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="class不能函数提升，存在暂时性死区"><a href="#class不能函数提升，存在暂时性死区" class="headerlink" title="class不能函数提升，存在暂时性死区"></a>class不能函数提升，存在暂时性死区</h5><h5 id="class没有公有属性"><a href="#class没有公有属性" class="headerlink" title="class没有公有属性"></a>class没有公有属性</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">	a = <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//默认将a=1放入constructor变为私有属性</span></span><br></pre></td></tr></table></figure>

<h5 id="公有方法私有化"><a href="#公有方法私有化" class="headerlink" title="公有方法私有化"></a>公有方法私有化</h5><ul>
<li><p>将方法名变为Symbol类型的值，独一无二</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> eat = <span class="built_in">Symbol</span>();</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">	[eat]()&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>将私有方法定义在class外部，公有方法可以调用该方法，但实例化对象无法调用</p>
</li>
</ul>
<p>静态方法和属性static，作为类的属性和方法，而不是实例化对象的</p>
<h5 id="getter和setter"><a href="#getter和setter" class="headerlink" title="getter和setter"></a>getter和setter</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>()</span>&#123;</span><br><span class="line">	<span class="keyword">get</span> a()&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="number">1</span>) <span class="comment">//取值函数</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">set</span> b(value)&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(value) <span class="comment">//存值函数</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> person = <span class="keyword">new</span> Person()</span><br><span class="line">person.a  <span class="comment">//1</span></span><br><span class="line">person.b = <span class="number">2</span> <span class="comment">//2</span></span><br></pre></td></tr></table></figure>

<h5 id="class内部默认严格模式"><a href="#class内部默认严格模式" class="headerlink" title="class内部默认严格模式"></a>class内部默认严格模式</h5><h3 id="类的继承"><a href="#类的继承" class="headerlink" title="类的继承"></a>类的继承</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Parent</span></span>&#123;</span><br><span class="line">	<span class="keyword">constructor</span>(name="leah")&#123;</span><br><span class="line">		<span class="keyword">this</span>.name = name</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//派生类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Child</span> <span class="keyword">extends</span> <span class="title">Parent</span></span>&#123;</span><br><span class="line">	<span class="keyword">constructor</span>(age=20,name='zheng')&#123;</span><br><span class="line">		<span class="keyword">super</span>(name);<span class="comment">//返回父级的实例，继承父类的当前属性</span></span><br><span class="line">		<span class="comment">//super必须在constructor内部</span></span><br><span class="line">		<span class="keyword">this</span>.age = age;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> Child);</span><br></pre></td></tr></table></figure>

<ol>
<li>在constructor里以函数形式来执行super</li>
<li>当super为对象时，在对象中指代对象的原型，在静态方法中指向自己的父类</li>
</ol>
<p>class总结：</p>
<ul>
<li>暂时性死区TDZ</li>
<li>严格模式</li>
<li>不可枚举</li>
<li>new</li>
<li>不传参不会报错</li>
</ul>
<h2 id="异步的开端-promise"><a href="#异步的开端-promise" class="headerlink" title="异步的开端-promise"></a>异步的开端-promise</h2><h3 id="Js的运行原理"><a href="#Js的运行原理" class="headerlink" title="Js的运行原理"></a>Js的运行原理</h3><p>进程：是计算机中的程序关于数据结合上的一次运行活动，是系统进行资源分配和调度的基本单位</p>
<p>多进程：启动多个进程，多个进程可以一块来执行多个任务</p>
<p>单线程：进程内一个相对独立的、可调度的执行的单元，同一时间只能做一件事</p>
<p>多线程：启动一个进程，在进程内部启动多个线程，多个线程可以一块执行多个任务</p>
<p>浏览器是多进程的，浏览器渲染引擎是多线程的</p>
<ol>
<li>JS引擎线程（单线程）     解释和执行JS代码     //1和2是互斥的</li>
<li>GUI线程：渲染用户界面</li>
<li>http网络请求线程     //3、4、5是webAPIs</li>
<li>定时器触发线程</li>
<li>浏览器事件处理线程</li>
</ol>
<p>Js的运行原理：JS引擎线程(单线程)，同时执行异步执行(基于事件驱动)</p>
<p>任务进入执行栈，先判断同步还是异步任务，同步任务进入主线程，异步任务调用相应webAPIs线程，注册回调函数后挂起，等待事件被触发。</p>
<p>异步线程中的事件被触发就会进入事件队列，等主线程中的同步任务全部执行完毕，就会到事件队列中取出一个异步事件进入主线程执行，先取出微任务，再取出宏任务执行，基于先进先出原则，然后反复监听同步和异步队列</p>
<p>异步：</p>
<ul>
<li>宏任务：script、setTimeout、setInterval</li>
<li>微任务:  Promise、process、nextTick</li>
</ul>
<p>webApis先将微任务放入任务队列，再放入宏任务</p>
<p>所有的异步代码都是以回调函数的方式出现，单并不是所有的回调函数都是异步代码</p>
<h3 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h3><ul>
<li>try…catch只能捕获同步异常，难于捕获回调异常</li>
<li>回调地狱难于维护，不便拓展</li>
<li>同步并发异步代码的问题</li>
</ul>
<p>PromiseA+规范定义了promise相关行为和方法</p>
<p>promise是避免回调地狱的一种解决方案</p>
<ul>
<li><p>promise对象的状态不受外界影响</p>
<ol>
<li>padding 进行中</li>
<li>fullfill(resolve) 已成功</li>
<li>reject 已失效</li>
</ol>
</li>
<li><p>状态的不可逆</p>
<p>promise状态固化后再对promise对象添加回调是可以直接拿到结果的，若是事件的话，错过即错过</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">	setInterval(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="built_in">Math</span>.random()*<span class="number">100</span> &gt; <span class="number">60</span> ? resolve() : reject()</span><br><span class="line">	&#125;,<span class="number">1000</span>);</span><br><span class="line">&#125;)</span><br><span class="line">promise.then(</span><br><span class="line">	()=&gt;<span class="built_in">console</span>.log(<span class="string">'及格'</span>),</span><br><span class="line">	()=&gt;<span class="built_in">console</span>.log(<span class="string">'不及格'</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p>第一次then的返回值作为下一次then的执行参数，从而实现链式调用</p>
<p>推荐写法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">	resoleve(a) <span class="comment">//undefined -&gt;reject捕获</span></span><br><span class="line">&#125;</span><br><span class="line">promise.then(<span class="literal">null</span>)</span><br><span class="line">	   .catch(<span class="function"><span class="params">reason</span>=&gt;</span><span class="built_in">console</span>.log(reason))</span><br></pre></td></tr></table></figure>

<h5 id="状态固化"><a href="#状态固化" class="headerlink" title="状态固化"></a>状态固化</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> promise = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">	resolve(<span class="string">'ok'</span>) <span class="comment">// resolve状态固化，但不会终止函数运行</span></span><br><span class="line">	<span class="built_in">console</span>.log(a) <span class="comment">// 忽略 </span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="comment">//catch能够通过冒泡捕获前面的所有错误，状态固化后，无法捕获错误 </span></span><br><span class="line"><span class="comment">//.then没有填参数会被忽略</span></span><br></pre></td></tr></table></figure>

<h5 id="状态依赖"><a href="#状态依赖" class="headerlink" title="状态依赖"></a>状态依赖</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> p1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">res,rej</span>)=&gt;</span>&#123;</span><br><span class="line">	setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">		reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">'fail'</span>))</span><br><span class="line">	&#125;,<span class="number">3000</span>)</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">const</span> p2 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">res,rej</span>)=&gt;</span>&#123;</span><br><span class="line">	setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">		resolve(p1)</span><br><span class="line">	&#125;,<span class="number">1000</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>p2先执行，执行到resolve传入参数p1</p>
<p>p2依赖于p1的状态，等p1执行完毕后才能传入参数</p>
<p>p1执行后状态固化为reject，抛出错误</p>
<h5 id="Promise原型上的方法"><a href="#Promise原型上的方法" class="headerlink" title="Promise原型上的方法"></a>Promise原型上的方法</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.all([p1,p2,p3]) <span class="comment">//参数为iterator对象 需要所有promise成功执行，才返回成功结果的数组，用then捕获，若失败则返回第一个失败的信息</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Promise</span>.rase([p1,p2,p3]) <span class="comment">//只要有一个promise执行，不论成功或失败都会返回率先执行的promise的结果，成功用then捕获，失败用catch捕获</span></span><br></pre></td></tr></table></figure>

<h5 id="thenable对象转成promise对象"><a href="#thenable对象转成promise对象" class="headerlink" title="thenable对象转成promise对象"></a>thenable对象转成promise对象</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> thenable = &#123;</span><br><span class="line">	then:<span class="function">(<span class="params">res,rej</span>)=&gt;</span>&#123;</span><br><span class="line">		res(<span class="string">'ok'</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> p1 = <span class="built_in">Promise</span>.resolve(thenable)</span><br><span class="line">p1.then(<span class="function"><span class="keyword">function</span>(<span class="params">value</span>)</span>&#123;<span class="built_in">console</span>.log(value)&#125;)</span><br></pre></td></tr></table></figure>

<h5 id="异步函数promise化-避免回调地狱"><a href="#异步函数promise化-避免回调地狱" class="headerlink" title="异步函数promise化(避免回调地狱)"></a>异步函数promise化(避免回调地狱)</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">readFile</span>(<span class="params">path</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">		fs.readFile(path,<span class="string">'utf-8'</span>,(err,data)=&gt;&#123;</span><br><span class="line">			<span class="keyword">if</span>(data)&#123;</span><br><span class="line">				resolve(data)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br><span class="line">reasFile(<span class="string">'./name.txt'</span>)</span><br><span class="line">.then(<span class="function"><span class="params">data</span>=&gt;</span>readFile(data))</span><br><span class="line">.then(<span class="function"><span class="params">data</span>=&gt;</span>readFile(data))</span><br><span class="line">.then(<span class="function"><span class="params">data</span>=&gt;</span>readFile(data))</span><br></pre></td></tr></table></figure>

<h5 id="异步函数promise化封装函数"><a href="#异步函数promise化封装函数" class="headerlink" title="异步函数promise化封装函数"></a>异步函数promise化封装函数</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">promisify</span>(<span class="params">func</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">...arg</span>)</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line">			func(...arg,(err,data)=&gt;&#123;</span><br><span class="line">				<span class="keyword">if</span>(err)&#123;</span><br><span class="line">					reject(err)</span><br><span class="line">				&#125;</span><br><span class="line">				resolve(data)</span><br><span class="line">			&#125;)</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>node已将promisify封装到util中</p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Leah Zheng</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://yoursite.com/2021/03/01/es6%E7%9F%A5%E8%AF%86%E7%82%B9%E6%95%B4%E7%90%86/">http://yoursite.com/2021/03/01/es6%E7%9F%A5%E8%AF%86%E7%82%B9%E6%95%B4%E7%90%86/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://yoursite.com" target="_blank">Leah's blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/ES6/">ES6</a></div><div class="post_share"><div class="social-share" data-image="https://s1.ax1x.com/2020/07/16/UDG9KO.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/03/05/17-%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF%E3%80%81try_catch%E3%80%81%E4%B8%A5%E6%A0%BC%E6%A8%A1%E5%BC%8F/"><img class="prev-cover" data-src="/img/background.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">17-错误信息、try_catch、严格模式</div></div></a></div><div class="next-post pull-right"><a href="/2021/02/24/vue%E5%93%8D%E5%BA%94%E5%BC%8F%E6%95%B0%E6%8D%AE%E5%8E%9F%E7%90%86/"><img class="next-cover" data-src="https://s1.ax1x.com/2020/07/16/UDG9KO.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Vue响应式数据</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2021/02/05/标签模板/" title="模板字面量与模板字符"><img class="relatedPosts_cover" data-src="https://s1.ax1x.com/2020/07/16/UDG9KO.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2021-02-05</div><div class="relatedPosts_title">模板字面量与模板字符</div></div></a></div><div class="relatedPosts_item"><a href="/2020/09/23/箭头函数与普通函数的区别/" title="箭头函数与普通函数的区别？"><img class="relatedPosts_cover" data-src="https://s1.ax1x.com/2020/07/16/UDG9KO.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-09-23</div><div class="relatedPosts_title">箭头函数与普通函数的区别？</div></div></a></div><div class="relatedPosts_item"><a href="/2020/10/06/迭代器与生成器的应用/" title="迭代器与生成器的应用"><img class="relatedPosts_cover" data-src="https://s1.ax1x.com/2020/07/16/UDG9KO.jpg"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="far fa-calendar-alt fa-fw"></i> 2020-10-06</div><div class="relatedPosts_title">迭代器与生成器的应用</div></div></a></div></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var requestSetting = function (from,set) {
  var from = from
  var setting = set.split(',').filter(function(item){
  return from.indexOf(item) > -1
  });
  setting = setting.length == 0 ? from :setting;
  return setting
}

var guestInfo = requestSetting(['nick','mail','link'],'nick,mail,link')
var requiredFields = requestSetting(['nick','mail'],'nick,mail')

window.valine = new Valine({
  el:'#vcomment',
  appId: 'RfNX3RMVFCEeS06KasYCAtjt-gzGzoHsz',
  appKey: 'tTWXrhAUDRMtHLOPEzfe3BGp',
  placeholder: 'Please leave your footprints',
  avatar: 'retro',
  meta: guestInfo,
  pageSize: '10',
  lang: 'en',
  recordIP: false,
  serverURLs: '',
  emojiCDN: '//i0.hdslb.com/bfs/emote/',
  emojiMaps: "",
  enableQQ: false,
  requiredFields: requiredFields
});</script></div></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By Leah Zheng</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><button id="readmode" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font_plus" title="放大字体"><i class="fas fa-plus"></i></button><button id="font_minus" title="缩小字体"><i class="fas fa-minus"></i></button><button class="translate_chn_to_cht" id="translateLink" title="简繁转换">繁</button><button id="darkmode" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" title="设置"><i class="fas fa-cog"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fas fa-comments"></i></a><button class="close" id="mobile-toc-button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script></body></html>